[
    {
        "contacts": {
            "actions": [
                "insert",
                "update"
            ],
            "exclude_existing_in_db": true,
            "exclude_key": "email",
            "source": "hubspot",
            "destination": "redshift",
            "destination_unique_keys": [
                "email"
            ],
            "request_data_source": "redshift",
            "update_key": "email",
            "model": "contacts",
            "url": {
                "response_data_key": [
                    "results"
                ],
                "params": {},
                "statics": {
                    "limit": "1000"
                }
            }
        }
    },
    {
        "companies": {
            "actions": [
                "insert",
                "update"
            ],
            "exclude_existing_in_db": true,
            "exclude_key": "id",
            "source": "hubspot",
            "destination": "redshift",
            "destination_unique_keys": [
                "id"
            ],
            "request_data_source": "redshift",
            "update_key": "id",
            "model": "companies",
            "url": {
                "type": "service",
                "response_data_key": [
                    "results"
                ]
            }
        }
    },
    {
        "events": {
            "actions": [
                "insert"
            ],
            "exclude_existing_in_db": false,
            "source": "hubspot",
            "destination": "redshift",
            "request_data_source": "redshift",
            "model": "events",
            "url": {
                "type": "service",
                "response_data_key": [
                    "results"
                ],
                "params": {
                    "db": {
                        "_": {
                            "type": "db",
                            "args_fields": [],
                            "kwargs_fields": [
                                [
                                    "id",
                                    "{}",
                                    "object_id"
                                ]
                            ],
                            "filter_model": "contacts",
                            "all_fields": [
                                "id"
                            ]
                        }
                    },
                    "statics": {
                        "object_type": "contacts"
                    }
                }
            }
        }
    },
    {
        "campaigns": {
            "actions": [
                "insert",
                "update"
            ],
            "exclude_existing_in_db": true,
            "exclude_key": "id",
            "source": "hubspot",
            "destination": "redshift",
            "destination_unique_keys": [
                "id"
            ],
            "request_data_source": "redshift",
            "model": "campaigns",
            "update_key": "id",
            "url": {
                "response_datas_key": "campaigns",
                "base": "https://api.hubapi.com/email/public/v1/campaigns",
                "params": {}
            }
        }
    },
    {
        "companies_2": {
            "actions": [
                "insert",
                "update"
            ],
            "exclude_existing_in_db": true,
            "exclude_key": "id",
            "source": "hubspot",
            "destination": "redshift",
            "destination_unique_keys": [
                "id"
            ],
            "request_data_source": "redshift",
            "model": "companies",
            "update_key": "id",
            "url": {
                "response_datas_key": "campaigns",
                "base": "https://api.hubapi.com/email/public/v1/campaigns",
                "params": {}
            }
        }
    },
    {
        "campaign_details": {
            "actions": [
                "insert",
                "update"
            ],
            "exclude_existing_in_db": true,
            "source": "hubspot",
            "destination": "redshift",
            "request_data_source": "redshift",
            "destination_unique_keys": [
                "id"
            ],
            "model": "campaign_details",
            "update_key": "id",
            "url": {
                "base": "https://api.hubapi.com/email/public/v1/campaigns/",
                "params": {
                    "db": {
                        "_": {
                            "type": "db",
                            "args_fields": [
                                "id"
                            ],
                            "kwargs_fields": [],
                            "db_fields": [],
                            "filter_model": "campaigns",
                            "all_fields": [
                                "id"
                            ],
                            "raw_sql": "select distinct(id) from {schema}.campaigns"
                        }
                    },
                    "statics": {}
                }
            }
        }
    },
    {
        "email_events": {
            "actions": [
                "insert",
                "update"
            ],
            "exclude_existing_in_db": true,
            "source": "hubspot",
            "destination": "redshift",
            "request_data_source": "redshift",
            "destination_unique_keys": [
                "id"
            ],
            "model": "email_events",
            "update_key": "id",
            "url": {
                "response_datas_key": "events",
                "base": "https://api.hubapi.com/email/public/v1/events",
                "params": {
                    "db": {
                        "_": {
                            "type": "rawsql",
                            "args_fields": [],
                            "kwargs_fields": [
                                [
                                    "id",
                                    "{}",
                                    "emailCampaignId"
                                ],
                                [
                                    "app_id",
                                    "{}",
                                    "appId"
                                ]
                            ],
                            "db_fields": [],
                            "raw_sql": "select id, app_id from {schema}.campaigns"
                        }
                    },
                    "statics": {
                        "limit": 1000
                    }
                }
            }
        }
    },
    {
        "company_contact_associations": {
            "actions": [
                "insert"
            ],
            "source": "hubspot",
            "destination": "redshift",
            "request_data_source": "redshift",
            "model": "company_contact_associations",
            "url": {
                "base": "https://api.hubapi.com/crm-associations/v1/associations/",
                "response_datas_key": "results",
                "params": {
                    "db": {
                        "_": {
                            "type": "db",
                            "args_fields": [
                                "id"
                            ],
                            "kwargs_fields": [],
                            "db_fields": [
                                {
                                    "origin_key": "id",
                                    "destination_key": "company_id"
                                }
                            ],
                            "filter_model": "companies",
                            "all_fields": [
                                "id"
                            ],
                            "raw_sql": "select distinct(id) from {schema}.companies"
                        }
                    },
                    "statics": {
                        "limit":100
                    }
                }
            }
        }
    }
]